model User {
    id             String   @id @default(uuid())
    clerkUserId    String   @unique // Clerk's userId
    createdAt      DateTime @default(now())
    updatedAt      DateTime @updatedAt
    lastLogin      DateTime @default(now())
    email          String   @unique
    name           String?
    picture        String?

    // Hash-based sync optimization
    clerkDataHash String? // Hash of Clerk data to detect changes
    lastFullSync  DateTime? // Track when last full sync happened

    clerkUser ClerkUser?

     // Settings
    pushToken              String?

    // role/type of user: homeowner or contractor
    userType UserType? @default(HOME_OWNER)

    projects Project[]

    // Relations for messaging
    sentMessages     Message[] @relation("sentMessages")
    receivedMessages Message[] @relation("receivedMessages")

    // Offers submitted by this user when they are contractors
    offers Offer[]

    // Media uploaded by this user
    media Media[]

    @@map("users")
}
