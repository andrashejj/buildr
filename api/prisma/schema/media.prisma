// Media stores URLs (hosted in Vercel Blob or other providers) for images/videos.
// We keep references back to a project, room or offer so media can be reused.
model Media {
  id           String    @id @default(uuid())

  // optional relations to associate media with a project, room
  projectId    String?
  project      Project?  @relation(fields: [projectId], references: [id], onDelete: Cascade)
  roomId       String?
  room         Room?     @relation(fields: [roomId], references: [id], onDelete: Cascade)

  // optional relation to associate media with an offer (e.g. offer images)
  offerId      String?
  offer        Offer?    @relation(fields: [offerId], references: [id], onDelete: Cascade)

  uri          String
  fileName     String
  type         MediaType
  

  // who uploaded this media (optional)
  uploadedById String?
  uploadedBy   User?     @relation(fields: [uploadedById], references: [id], onDelete: Cascade)

  // attachments that reference this media
  messageAttachments MessageAttachment[]

  uploadedAt    DateTime @default(now())

  @@map("media")
}
